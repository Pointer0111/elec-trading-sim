### **场景 1：单一价格清算市场（Single-price Clearing Market）**

#### **核心可视化目标**

展示集中式市场中 “供需平衡决定单一清算价格” 的过程，突出低成本资源优先调度的效率逻辑。

#### **具体可视化内容**

1. **供需曲线与清算点图（折线图 + 标记点）**

   - **X 轴**：发电量（MW），按卖家报价从低到高排序（体现 “边际成本递增”）。

   - **Y 轴**：价格（$），左侧为卖家报价，右侧为需求曲线（完全无弹性，垂直直线）。

   - 关键标记

     ：

     - 红色圆点标记 “市场清算价格（MCP）”—— 供需曲线交点。
     - 阴影区域标记 “被调度的卖家区间”（从最低报价到 MCP 对应的卖家）。

   - **动态效果**：随卖家报价提交实时更新曲线，清算时闪烁 MCP 点。

2. **卖家利润明细表（表格 + 柱状图）**

   - **表格列**：卖家 ID、边际成本（MC）、报价、是否被调度、利润（MCP - MC）。
   - **关联柱状图**：按卖家 ID 排序，蓝色柱表示 MC，橙色柱表示利润（若被调度），灰色柱表示未被调度（利润为 0）。

3. **市场总 surplus 分解图（饼图）**

   - 分为 “消费者剩余”（买家最高支付意愿 - MCP）和 “生产者剩余”（Σ 卖家利润），直观展示社会总福利。

### **场景 2：按报价付费市场（Pay-as-Bid）**

#### **核心可视化目标**

对比 “单一价格” 与 “按报价付费” 的福利分配差异，突出消费者成本与卖家收益的变化。

#### **具体可视化内容**

1. **两种机制的价格对比图（双柱状图）**

   - **X 轴**：卖家 ID（按报价排序）。

   - **Y 轴**：单位收入（$）。

   - 数据系列

     ：

     - 蓝色柱：场景 1 中的 “单一价格（MCP）”。
     - 橙色柱：场景 2 中的 “卖家实际报价”。

   - **标注**：顶部标注两种机制下的 “消费者总支付”（Σ 报价 vs MCP× 总需求）。

2. **卖家利润差异图（堆叠柱状图）**

   - 每个卖家对应一根柱子，分为 “成本（MC）” 和 “利润” 两部分：
     - 场景 1 中利润为统一高度（MCP - MC）。
     - 场景 2 中利润高度随报价变化（报价 - MC）。
   - **趋势线**：虚线连接场景 1 的利润总和，实线连接场景 2 的利润总和，直观展示总利润差异。

3. **消费者成本构成图（饼图）**

   - 对比两种机制下 “总成本” 的构成（仅因定价规则不同，无效率损失），标注 “福利转移量”（场景 2 - 场景 1 的差额）。

### **场景 3：含输电约束的市场（Transmission Constraints）**

#### **核心可视化目标**

展示输电容量限制如何导致 “区域隔离”，迫使高成本资源被启用，突出市场效率损失。

#### **具体可视化内容**

1. **区域划分与电力流向图（地图 + 箭头）**

   - 地图元素

     ：

     - 左右分区标注 “西区”（低成本卖家集中）和 “东区”（高成本卖家集中）。
     - 中间线段标注 “输电线路”，显示容量上限（如 “3MW”）。
     - 卖家图标：西区用绿色圆点（MC 低），东区用红色圆点（MC 高）。

   - 箭头动态

     ：

     - 绿色箭头表示从西区到东区的电力传输，长度随传输量变化（不超过容量）。
     - 红色叉号标记 “被约束关闭的西区卖家”（因传输容量不足）。
     - 黄色感叹号标记 “被约束开启的东区卖家”（高成本但必须启用）。

2. **约束前后调度对比表（表格 + 热力图）**

   - **表格列**：卖家 ID、区域、MC、无约束时是否调度、有约束时是否调度、状态（正常 / 约束关闭 / 约束开启）。
   - **热力图**：用颜色深浅标记 MC（绿色 = 低，红色 = 高），直观显示 “高成本卖家被启用” 的低效性。

3. **统一价格与实际成本偏差图（折线图）**

   - **X 轴**：调度顺序（从 1 到总需求）。

   - **Y 轴**：价格（$）。

   - 数据系列

     ：

     - 虚线表示 “统一 MCP”（无约束时的清算价）。
     - 实线表示 “实际调度的卖家 MC”（因约束，后期出现高 MC）。

   - **阴影区域**：标注 “效率损失”（实际 MC > MCP 的部分）。

### **场景 4：含拥堵管理结算的市场（CMSC）**

#### **核心可视化目标**

展示拥堵管理结算 credits（CMSC）如何补偿受约束卖家，同时量化消费者为此承担的额外成本。

#### **具体可视化内容**

1. **CMSC 补偿明细图（表格 + 瀑布图）**
   - **表格列**：卖家 ID、区域、状态（约束关闭 / 约束开启）、报价、MCP、CMSC 金额（约束关闭：MCP - 报价；约束开启：报价 - MCP）。
   - **瀑布图**：从 “无约束总利润” 开始，逐步叠加 CMSC，展示受约束卖家的最终收益（弥补损失或增加收益）。
2. **消费者成本构成图（堆叠柱状图）**
   - **X 轴**：成本类型（基础电费、CMSC）。
   - **Y 轴**：总金额（$）。
   - **细分**：基础电费 = MCP× 总需求；CMSC=Σ 约束关闭补偿 + Σ 约束开启补偿。
   - **对比标注**：顶部标注 “含 CMSC 的总成本” 与 “无约束总成本” 的差额（即拥堵带来的额外成本）。
3. **区域价格与补偿关联图（散点图）**
   - **X 轴**：卖家报价（$）。
   - **Y 轴**：MCP + CMSC（约束开启卖家）或 MCP（正常卖家）或 CMSC（约束关闭卖家）。
   - **趋势线**：显示补偿后卖家的实际收入与报价的关系，突出 “约束开启卖家收入 = 报价”“约束关闭卖家收入 = MCP”。

### **场景 5：位置定价市场（Locational Pricing）**

#### **核心可视化目标**

通过区域边际价格（LMP）反映地理差异，展示价格信号如何引导资源高效配置（如激励东区新增低成本电源）。

#### **具体可视化内容**

1. **区域价格对比地图（热力图 + 数值标记）**

   - **地图分区**：西区和东区用不同颜色填充（西区绿色，东区红色）。
   - **数值标注**：区域中心显示 “区域边际价格（LMP）”（西区低，东区高）。
   - **传输箭头**：标注从西区到东区的传输量，箭头颜色随 LMP 差异变化（差异越大，颜色越深）。

2. **区域供需曲线对比图（双折线图）**

   - **X 轴**：区域内发电量（MW）。

   - **Y 轴**：价格（$）。

   - 数据系列

     ：

     - 西区曲线（绿色）：因低成本卖家多，曲线平缓上升，LMP 低。
     - 东区曲线（红色）：因高成本卖家被启用，曲线陡峭上升，LMP 高。

   - **标记点**：各自的供需平衡点（LMP 对应的位置）。

3. **卖家收入与区域 LMP 关联图（柱状图）**

   - **X 轴**：卖家 ID（按区域分组）。
   - **Y 轴**：收入（$）。
   - **分组显示**：西区卖家收入 = 西区 LMP，东区卖家收入 = 东区 LMP，用不同颜色区分区域，直观展示收入差异。

### **场景 6：含固定成本的市场（Fixed Costs）**

#### **核心可视化目标**

突出非快速启动发电机的固定成本（启动成本、最小运行时间）对其报价策略和生存能力的影响，预警 “固定成本无法覆盖” 的风险。

#### **具体可视化内容**

1. **发电机成本结构拆分图（堆叠条形图）**

   - **X 轴**：发电机类型（快速启动 / 非快速启动）。

   - **Y 轴**：成本（$）。

   - 拆分

     ：

     - 快速启动：仅显示 “边际成本（MC）”（蓝色）。
     - 非快速启动：堆叠 “启动成本”（红色）、“最小运行时间的 MC 总和”（蓝色）、“速度 - 空载成本”（灰色）。

   - **标注**：非快速启动发电机上方标注 “需覆盖的总成本”。

2. **跨时段利润跟踪图（折线图 + 警戒线）**

   - **X 轴**：时段（1、2）。

   - **Y 轴**：利润（$）。

   - 数据系列

     ：

     - 实线表示非快速启动发电机在各时段的利润（收入 - MC）。
     - 虚线表示 “需覆盖的启动成本”（警戒线）。

   - **阴影区域**：若总利润 <启动成本，标注 “亏损风险”，并用红色闪烁提醒。

3. **调度时间轴与约束提示（甘特图）**

   - **X 轴**：时间（两个时段）。
   - **Y 轴**：发电机 ID（区分类型）。
   - **色块**：绿色表示运行，灰色表示停运。
   - **约束标记**：非快速启动发电机若运行时间 <最小要求，右侧标注 “! 未满足最小运行时间”。

### **场景 7：含成本回收保证的市场（Cost Recovery Guarantees）**

#### **核心可视化目标**

对比有无成本回收保证时非快速启动发电机的利润差异，展示保证机制如何降低其报价风险。

#### **具体可视化内容**

1. **利润对比柱状图（分组柱状图）**

   - **X 轴**：非快速启动发电机 ID。

   - **Y 轴**：总利润（$）。

   - 分组

     ：

     - 无保证：总利润 =（时段 1 利润 + 时段 2 利润） - 启动成本（可能为负）。
     - 有保证：总利润 = max (0, 无保证利润)（亏损部分由补贴弥补）。

   - **标注**：红色箭头标注 “补贴金额”（有保证时的利润 - 无保证时的利润）。

2. **成本回收进度图（仪表盘 + 进度条）**

   - **仪表盘**：显示 “启动成本覆盖比例”（无保证时可能 < 100%，有保证时 = 100%）。
   - **进度条**：分时段显示利润积累，黄色表示时段 1，蓝色表示时段 2，红色表示需补贴部分（若有）。

3. **消费者补贴负担图（饼图）**

   - 分为 “无保证时的消费者成本” 和 “有保证时的额外补贴”，标注 “补贴占比”（额外成本 / 总成本），直观展示社会为此付出的代价。

### **场景 8：多时段优化市场（Multi-Interval Optimization）**

#### **核心可视化目标**

展示跨时段优化如何通过协调调度降低非快速启动发电机的固定成本浪费，突出 “时间维度上的效率提升”。

#### **具体可视化内容**

1. **单时段 vs 多时段优化对比图（双热力图）**

   - **X 轴**：时段（1、2）。
   - **Y 轴**：发电机 ID（区分类型）。
   - **热力规则**：绿色 = 被调度，灰色 = 未调度，颜色深度表示优先级（越深越优先）。
   - **左侧（单时段优化）**：可能出现非快速启动发电机仅在一个时段运行（违反最小时间约束）。
   - **右侧（多时段优化）**：非快速启动发电机在两个时段连续运行（满足约束），高成本快速启动发电机被替代。

2. **总成本分解对比图（堆叠饼图）**

   - **左饼图（单时段）**：包含 “重复启动成本”“高成本快速启动电费”。
   - **右饼图（多时段）**：包含 “单次启动成本”“低成本非快速启动电费”。
   - **标注**：中心显示总成本差异，突出多时段优化的成本节约。

3. **跨时段报价策略图（折线图）**

   - **X 轴**：时段（1、2）。

   - **Y 轴**：非快速启动发电机报价（$）。

   - 数据系列

     ：

     - 虚线表示 “单时段优化时的报价”（因风险高而报高价）。
     - 实线表示 “多时段优化时的报价”（因成本可分摊而报低价）。

   - **关联标记**：同步显示对应时段的需求，解释报价与需求的联动。

### **场景 9：含规划风险的市场（Planning Risk）**

#### **核心可视化目标**

量化 “规划期预测” 与 “实时实际” 的偏差（需求、outage）对价格和调度的冲击，突出风险带来的市场波动。

#### **具体可视化内容**

1. **需求预测偏差图（折线图 + 误差带）**

   - **X 轴**：时间（规划期、实时）。

   - **Y 轴**：需求（MW）。

   - 数据系列

     ：

     - 蓝色线表示 “规划期预测需求”，带灰色误差带（概率分布：如 7MW±1MW）。
     - 红色线表示 “实时实际需求”，用箭头标记偏差方向（如 8MW > 7MW）。

2. **Outage 风险与供电缺口图（概率树 + 柱状图）**

   - **概率树**：展示发电机 outage 概率（如 10% 概率停运），分支末端标注 “可用发电量”。

   - 柱状图

     ：

     - 左侧为 “规划期调度量”，右侧为 “实时可用量”。
     - 红色柱标注 “供电缺口”（实时需求 - 实时可用量），需由备用电源填补。

3. **价格波动对比图（折线图）**

   - **X 轴**：时间（规划期、实时）。

   - **Y 轴**：价格（$）。

   - 数据系列

     ：

     - 虚线表示 “规划期预测价格”（基于预测需求）。
     - 实线表示 “实时实际价格”（因缺口，备用电源高价导致飙升）。

   - **标注**：用闪电图标标记 “价格尖峰”，并显示尖峰幅度（如从$50→$100）。

### **场景 10：日前市场与实时结算（Day-Ahead + Two-Settlement）**

#### **核心可视化目标**

展示两阶段结算机制如何通过 “日前锁定部分收入” 降低实时价格波动风险，突出财务确定性对市场稳定的作用。

#### **具体可视化内容**

1. **两阶段结算公式拆解图（公式动画 + 示例）**

   - **动态公式**：逐步展示 “总收入 = Q_DAM×P_DAM + (Q_RTM - Q_DAM)×P_RTM”，用箭头连接各变量与实际数据。

   - 示例计算

     ：

     - 日前：Q_DAM=3MW，P_DAM=$50 → 锁定收入$150。
     - 实时：Q_RTM=4MW，P_RTM=$100 → 调整收入$100 → 总收入 $250。

   - **对比标注**：若无日前市场，收入 = 4×100=$400（波动大）。

2. **收入稳定性对比图（箱线图）**

   - **X 轴**：结算机制（无日前市场、有日前市场）。
   - **Y 轴**：卖家收入（$）。
   - **箱体**：展示多次模拟中的收入分布，突出有日前市场时 “中位数更稳定，波动范围更小”。

3. **日前与实时调度对比表（表格 + 流向图）**

   - **表格列**：发电机 ID、日前调度量、实时实际量、调整量（±）。
   - **流向图**：用箭头连接日前与实时的调度量，绿色表示增加，红色表示减少，箭头长度对应调整量。

### **通用交互设计原则**

1. **实时更新**：随用户操作（如提交报价、选择场景参数）即时刷新图表，避免滞后。
2. **悬停详情**：鼠标悬停在图表元素上时，显示具体数值（如 “卖家 A 利润：$20”“LMP：$50”）。
3. **历史回溯**：支持查看 “上一步状态”，方便对比不同参数下的结果。
4. **导出功能**：允许教师导出当前可视化结果（截图或数据表格），用于课堂复盘。